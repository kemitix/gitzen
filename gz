#!/usr/bin/env python

import sys

from gitzen import config, envs, git, github, repo
from gitzen.commands import push, status

print("`git zen` - prototype")

gitEnv: envs.GitEnv = git.RealGitEnv()
githubEnv: envs.GithubEnv = github.RealGithubEnv()
gitGithubEnv: envs.GitGithubEnv = envs.GitGithubEnv(gitEnv, githubEnv)

rootDir = repo.root_dir(gitEnv)  # verifies that we are in a git repo or exits
config = config.load(rootDir)

for i, arg in enumerate(sys.argv):
    if i != 1:
        continue
    match arg:
        case "status":
            status.status(gitGithubEnv)
        case "push":
            push.push(gitGithubEnv, config)
